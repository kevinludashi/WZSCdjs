<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>倒计时管理</title>
    <style>
         body {
                    display: flex; /* 使用flex布局 */
                    justify-content: center; /* 水平居中 */
                    align-items: center; /* 垂直居中 */
                    flex-direction: column; /* 元素从上到下排列 */
                    min-height: 100vh; /* 最小高度为视口高度 */
                    margin: 0; /* 去掉默认的边距 */
                    font-family: Arial, sans-serif; /* 设置字体 */
                    background: linear-gradient(45deg, #ff0000, #ff6ec7, #ff8a00, #7bdff2, #4caf50); /* 设置渐变背景 */
                    background-size: 600% 600%; /* 设置背景大小 */
                    animation: gradientAnimation 10s ease infinite; /* 应用渐变动画 */
                    color: white; /* 设置文字颜色 */
                }
                h1 {
                    margin-bottom: 20px; /* 标题下方的外边距 */
                }
                .countdown {
                    position: relative; /* 设置定位方式 */
                    margin-bottom: 20px; /* 下方的外边距 */
                    border: 1px solid rgba(255, 255, 255, 0.6); /* 设置半透明的边框 */
                    padding: 10px; /* 内边距 */
                    border-radius: 15px; /* 边框圆角 */
                    width: 300px; /* 固定宽度 */
                    text-align: center; /* 文本居中 */
                    background-color: rgba(255, 255, 255, 0.2); /* 设置半透明的背景色 */
                    color: white; /* 设置字体颜色 */
                }
                .countdown-title {
                    font-weight: bold; /* 加粗字体 */
                    margin-bottom: 10px; /* 下方的外边距 */
                }
                .countdown-timer {
                    font-size: 20px; /* 字体大小 */
                    margin-bottom: 10px; /* 下方的外边距 */
                }
                .delete-button {
                    position: absolute; /* 绝对定位 */
                    top: 10px; /* 距离顶部10px */
                    right: 10px; /* 距离右侧10px */
                    background: none; /* 无背景 */
                    border: none; /* 无边框 */
                    color: white; /* 字体颜色 */
                    font-size: 16px; /* 字体大小 */
                    cursor: pointer; /* 鼠标样式 */
                }
                #countdown-container {
                    display: flex; /* 使用flex布局 */
                    flex-wrap: wrap; /* 换行显示 */
                    justify-content: center; /* 水平居中 */
                    gap: 20px; /* 元素之间的间距 */
                }
                .input-container {
                    display: flex; /* 使用flex布局 */
                    align-items: center; /* 垂直居中 */
                    margin-bottom: 20px; /* 下方的外边距 */
                }
                .input-container label {
                    margin-right: 10px; /* 右侧的外边距 */
                }
                .input-container input,
                .input-container button {
                    margin: 0 5px; /* 左右的外边距 */
                }
                .input-container input {
                    background: transparent; /* 背景透明 */
                    border: 1px solid white; /* 白色边框 */
                    color: white; /* 字体颜色 */
                    padding: 5px; /* 内边距 */
                    border-radius: 3px; /* 边框圆角 */
                }
                .input-container input:focus {
                    outline: none; /* 去掉聚焦时的外边框 */
                }
                .input-container button {
                    background: transparent; /* 背景透明 */
                    border: 1px solid white; /* 白色边框 */
                    color: white; /* 字体颜色 */
                    padding: 5px 10px; /* 内边距 */
                    border-radius: 3px; /* 边框圆角 */
                    cursor: pointer; /* 鼠标样式 */
                }
                .input-container button:hover {
                    background: rgba(255, 255, 255, 0.2); /* 鼠标悬停时的背景色 */
                }
        
                footer {
                    text-align: center; /* 内容居中 */
                    font-size: 14px; /* 字体大小 */
                    color: white; /* 字体颜色 */
                    padding: 10px 0; /* 内边距 */
                    position: sticky; /* 粘性定位 */
                    bottom: 0; /* 在页面底部 */
                    width: 100%; /* 宽度占满 */
                    left: 0; /* 向左对齐 */
                    background-color:rgba(255, 255, 255, 0.0); /* 背景颜色 */
                    z-index: 1000; /* 确保页脚位于最上层 */
                    margin-top: auto; /* 保证页脚始终在页面底部 */
                }
        
                footer a {
                    color: #007bff; /* 链接颜色 */
                    text-decoration: none; /* 去掉下划线 */
                }
        
                footer a:hover {
                    text-decoration: underline; /* 鼠标悬停时加下划线 */
                }
        
                @keyframes gradientAnimation {
                    0% {
                        background-position: 0% 50%; /* 初始背景位置 */
                    }
                    50% {
                        background-position: 100% 50%; /* 中间背景位置 */
                    }
                    100% {
                        background-position: 0% 50%; /* 结束背景位置 */
                    }
                }
        
                .particle-container {
                    position: fixed; /* 使用固定定位 */
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    pointer-events: none; /* 确保粒子不影响页面其他元素 */
                    z-index: 1; /* 确保粒子在最上层 */
                }
                
                .particle {
                    position: absolute; /* 绝对定位 */
                    width: 5px; /* 粒子宽度 */
                    height: 5px; /* 粒子高度 */
                    background-color: rgba(255, 255, 255, 0.8); /* 粒子颜色和透明度 */
                    border-radius: 50%; /* 圆形粒子 */
                    animation: particleAnimation 3s infinite ease-in-out; /* 粒子动画 */
                }
                
                @keyframes particleAnimation {
                    0% {
                        transform: translate(0, 0); /* 初始位置 */
                        opacity: 0.8; /* 初始透明度 */
                    }
                    50% {
                        transform: translate(50px, 50px); /* 中间位置 */
                        opacity: 0.5; /* 中间透明度 */
                    }
                    100% {
                        transform: translate(100px, 100px); /* 最终位置 */
                        opacity: 0; /* 最终透明度 */
                    }
                }
				
				/* 说明部分样式 */
						.instructions {
						    border: 1px solid white; /* 边框样式 */
						    position: fixed; /* 固定定位 */
						    top: 50%; /* 垂直居中 */
						    left: 50%; /* 水平居中 */
						    transform: translate(-50%, -50%); /* 使用 transform 精确居中 */
						    font-size: 16px;
						    color: #333;
						    background-color: rgba(255, 255, 255, 0.3); /* 背景颜色调整为稍微透明，方便看清底下内容 */
						    padding: 15px;
						    border-radius: 15px;
						    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
						    z-index: 9999; /* 确保说明弹窗显示在所有元素之上 */
						    display: block;
						    overflow-y: auto; /* 防止内容溢出 */
						    width: 80%;
						}
						
						#countdown-container, .input-container, footer {
						    z-index: 1; /* 使其他页面元素的层级低于说明弹窗 */
						}

									
						.instructions ul {
							margin: 0;
							padding-left: 0; /* 去掉左侧内边距 */
							list-style-type: none; /* 去掉默认的项目符号 */
						}
									
						.instructions li {
							margin-bottom: 15px; /* 增加每行说明之间的间距 */
							padding-left: 30px; /* 为每行文字增加左间距 */
						}
						
						.instructions h3 {
							text-align: center; /* 标题居中 */
							font-size: 30px;
							color: red;
							margin-top: 10px; /* 增加标题的上间距 */
						}
									
						.close-btn {
							position: absolute;
							top: 5px;
							right: 20px;
							font-size: 20px;
							color: #888;
							cursor: pointer;
						}
						/* 说明部分样式 */
		/* 自适应手机屏幕 */
		        @media (max-width: 600px) {
		            body {
		                font-size: 14px; /* 缩小字体 */
		                padding: 0 10px; /* 给body添加左右间距 */
		            }
		
		            h1 {
		                font-size: 24px; /* 缩小标题 */
		                margin-bottom: 10px;
		            }
		
		            .countdown {
		                width: 100%; /* 让倒计时框的宽度占满父容器 */
		                max-width: 350px; /* 设置最大宽度，避免过大 */
		                margin: 10px 0; /* 适当缩小倒计时之间的间距 */
		            }
		
		            .input-container {
		                flex-direction: column; /* 使输入部分纵向排列 */
		                align-items: stretch; /* 让元素宽度占满容器 */
		            }
		
		            .input-container label {
		                margin-right: 0; /* 去掉右边距 */
		                margin-bottom: 5px; /* 增加间距 */
		            }
		
		            .input-container input,
		            .input-container button {
		                width: 100%; /* 让输入框和按钮宽度占满容器 */
		                margin-bottom: 10px; /* 增加间距 */
		            }
		
		            footer {
		                font-size: 12px; /* 缩小页脚字体 */
		                padding: 5px 0; /* 缩小内边距 */
		                width: 100%; /* 确保页脚宽度为100% */
		                left: 0; /* 确保页脚贴合页面左边 */
		                margin-left: 0; /* 去除任何可能的左边距 */
		                margin-right: 0; /* 去除任何可能的右边距 */
		            }
		        }
    </style>
</head>
<body>
	<!-- 粒子容器 -->
	<div id="particle-container" class="particle-container"></div>
	
	<!-- 说明部分 -->
		<div class="instructions" id="instructions">
		  <span class="close-btn" id="closeBtn" style="color: red; font-size: 50px;">&times;</span> <!-- 关闭按钮 -->
		  <h3>温馨提示：</h3>
		  <ul>
			<li style="color: #007bff; font-weight: bold;">重要：点击保存倒计时，下载的html文件用浏览器打开即可；</li>
		    <li>1、由于网页托管于国际服务器，可能会出现加载不出来的问题（该服器很安全，可放心使用）；</li>
		    <li>2、当页面出现BUG或者打不开时请尝试多刷新几次（刷新20+次都属于正常）；</li>
		    <li>3、当刷新页面20+次后依然无法打开时可尝试复制网址更换浏览器打开；</li>
		    <li>4、微信打开时可能会提醒有风险，请忽略，也可能会显示打不开，请尝试多刷新几次就能打开；</li>
		    <li>5、网页部分内容来自网络，请自行甄别，博主不承担任何风险；</li>
		  </ul>
		</div>

    <h1>自定义倒计时</h1>
    <div class="input-container">
        <label for="title">标题:</label>
        <input type="text" id="title" required>
        <label for="date">日期时间:</label>
        <input type="datetime-local" id="date" required>
        <button onclick="addCountdown()">添加倒计时</button>
        <button onclick="downloadHtml()">保存倒计时</button>
    </div>
    <div id="countdown-container"></div>
    <footer>© 2025 Kevinludashi 的代码空间. 未经许可，禁止转载.</footer>

    <script>
		// 关闭说明按钮
					closeBtn.addEventListener('click', () => {
					instructions.style.display = 'none'; // 隐藏说明部分
					});
		
		// 创建粒子背景
		function createParticles() {
		    const particleContainer = document.getElementById('particle-container');  // 获取粒子容器
		    const particlesCount = 100; // 粒子数量
		
		    for (let i = 0; i < particlesCount; i++) {  // 循环创建粒子
		        const particle = document.createElement('div');  // 创建一个新的div元素用于粒子
		        particle.classList.add('particle');  // 设置粒子的类名
		
		        // 随机设置粒子的位置
		        particle.style.top = `${Math.random() * window.innerHeight}px`;  // 随机设置粒子的顶部位置
		        particle.style.left = `${Math.random() * window.innerWidth}px`;  // 随机设置粒子的左侧位置
		
		        // 随机设置粒子的动画时间
		        particle.style.animationDuration = `${Math.random() * 2 + 1}s`;  // 随机设置粒子的动画持续时间
		
		        // 将粒子添加到容器中
		        particleContainer.appendChild(particle);  // 将粒子添加到粒子容器中
		    }
		}
		
		// 调用粒子生成函数
		createParticles();  // 调用创建粒子函数
		
        let countdowns = [];
        
        // 添加倒计时
        function addCountdown() {
            const title = document.getElementById('title').value;
            const date = document.getElementById('date').value;
        
            if (!title || !date) {
                alert("请填写标题和日期时间！");
                return;
            }
        
            const countdownContainer = document.getElementById('countdown-container');
            const countdownDiv = document.createElement('div');
            countdownDiv.className = 'countdown';
        
            const titleElem = document.createElement('div');
            titleElem.className = 'countdown-title';
            titleElem.textContent = title;
        
            const timerElem = document.createElement('div');
            timerElem.className = 'countdown-timer';
            timerElem.id = `timer-${Date.now()}`;
        
            const deleteButton = document.createElement('button');
            deleteButton.className = 'delete-button';
            deleteButton.textContent = 'X';
            deleteButton.onclick = () => {
                countdownDiv.remove();
                countdowns = countdowns.filter(cd => cd.id !== timerElem.id);
                saveCountdownsToLocalStorage(); // 删除时也保存
            };
        
            countdownDiv.appendChild(titleElem);
            countdownDiv.appendChild(timerElem);
            countdownDiv.appendChild(deleteButton);
        
            countdownContainer.appendChild(countdownDiv);
        
            const countdownData = { title, date, id: timerElem.id };
            countdowns.push(countdownData);
            saveCountdownsToLocalStorage(); // 保存到localStorage
        
            // 启动倒计时
            startCountdown(date, timerElem.id);
        }
        
        // 启动倒计时
        function startCountdown(endTime, elementId) {
            function updateCountdown() {
                const now = new Date().getTime();
                const distance = new Date(endTime).getTime() - now;
        
                if (distance < 0) {
                    document.getElementById(elementId).textContent = "倒计时结束";
                    clearInterval(interval);
                    return;
                }
        
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
                document.getElementById(elementId).textContent = `${days}天 ${hours}时 ${minutes}分 ${seconds}秒`;
            }
        
            updateCountdown(); // 立即更新倒计时
            const interval = setInterval(updateCountdown, 1000); // 每秒更新倒计时
        }
        
        // 保存倒计时数据到localStorage
        function saveCountdownsToLocalStorage() {
            localStorage.setItem('countdowns', JSON.stringify(countdowns));
        }
        
        // 从localStorage恢复倒计时
        window.onload = function() {
            const countdownContainer = document.getElementById('countdown-container');
            countdownContainer.innerHTML = ''; // 清空倒计时容器
        
            const countdownData = JSON.parse(localStorage.getItem('countdowns') || '[]');
            countdownData.forEach(item => {
                const countdownDiv = document.createElement('div');
                countdownDiv.className = 'countdown';
        
                const titleElem = document.createElement('div');
                titleElem.className = 'countdown-title';
                titleElem.textContent = item.title;
        
                const timerElem = document.createElement('div');
                timerElem.className = 'countdown-timer';
                timerElem.id = item.id;
        
                const deleteButton = document.createElement('button');
                deleteButton.className = 'delete-button';
                deleteButton.textContent = 'X';
                deleteButton.onclick = () => {
                    countdownDiv.remove();
                    countdowns = countdowns.filter(cd => cd.id !== timerElem.id);
                    saveCountdownsToLocalStorage(); // 删除时也保存
                };
        
                countdownDiv.appendChild(titleElem);
                countdownDiv.appendChild(timerElem);
                countdownDiv.appendChild(deleteButton);
        
                countdownContainer.appendChild(countdownDiv);
        
                // 恢复倒计时
                startCountdown(item.date, item.id);
            });
        };
        
        // 下载HTML文件
        function downloadHtml() {
    // 临时隐藏倒计时输入部分和删除按钮
    document.querySelector('.input-container').style.display = 'none';
    
    const deleteButtons = document.querySelectorAll('.delete-button');
    
    // 移除删除按钮
    deleteButtons.forEach(button => {
        button.remove();
    });

    // 获取页面的 HTML 内容
    const htmlContent = document.documentElement.outerHTML;
    const blob = new Blob([htmlContent], { type: 'text/html' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = '自定义倒计时.html';
    a.click();
    URL.revokeObjectURL(url);

    // 下载后恢复倒计时输入部分和删除按钮显示
    setTimeout(() => {
        document.querySelector('.input-container').style.display = 'flex';

        // 恢复删除按钮
        const countdowns = document.querySelectorAll('.countdown');
        countdowns.forEach(countdown => {
            const deleteButton = document.createElement('button');
            deleteButton.className = 'delete-button';
            deleteButton.textContent = 'X';
            deleteButton.onclick = () => {
                countdown.remove();
                saveCountdownsToLocalStorage(); // 删除时也保存
            };
            countdown.appendChild(deleteButton);
        });
    }, 0);
}

    </script>
</body>
</html>
